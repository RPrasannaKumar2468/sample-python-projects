user www-data;
worker_processes auto;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;



events {
	worker_connections 768;
	# multi_accept on;
}

http {

	##
	# Basic Settings
	##
	proxy_cache_path /tmp/cache keys_zone=mycache:10m levels=1:2 inactive=120s max_size=100m;
	sendfile on;
	tcp_nopush on;
	tcp_nodelay on;
	keepalive_timeout 65;
	types_hash_max_size 2048;
        client_max_body_size 5000M;
	proxy_connect_timeout       600;
	proxy_send_timeout          600;
	proxy_read_timeout          600;
	send_timeout                600;
	# server_tokens off;

	# server_names_hash_bucket_size 64;
	# server_name_in_redirect off;

	include /etc/nginx/mime.types;
	default_type application/octet-stream;

	##
	# SSL Settings
	##

	ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE
	ssl_prefer_server_ciphers on;

	##
	# Logging Settings
	##

	access_log /var/log/nginx/access.log;
	error_log /var/log/nginx/error.log;

	##
	# Gzip Settings
	##
	
       # upstream kairosdb {
       #     #random; 
       #     server 10.211.19.37:8080; 
       # }

    upstream kairosdb {
            server 10.211.19.36:8081 max_fails=2  fail_timeout=20s;
            server 10.211.19.37:8081 max_fails=2  fail_timeout=20s;
            server 10.211.19.38:8081 max_fails=2  fail_timeout=20s;
            server 10.211.19.48:8081 max_fails=2  fail_timeout=20s;
            server 10.211.19.44:8081 max_fails=2  fail_timeout=20s;
            server 10.211.19.45:8081 max_fails=2  fail_timeout=20s;
            server 10.211.19.46:8081 max_fails=2  fail_timeout=20s;
            server 10.211.19.49:8081 max_fails=2  fail_timeout=20s;
            server 10.211.19.43:8081 max_fails=2  fail_timeout=20s;
            server 10.211.19.50:8081 max_fails=2  fail_timeout=20s;
          }
          


    upstream Auxpowern_Consumption_report-api-es {
        server 10.211.19.36:7709 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:7709 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:7709 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:7709 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:7709 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:7709 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:7709 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:7709 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:7709 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:7709 max_fails=2 fail_timeout=30s;
    }
    

    upstream absolutefast-data-api {
        server 10.211.19.36:5039 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:5039 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:5039 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:5039 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:5039 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:5039 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:5039 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:5039 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:5039 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:5039 max_fails=2 fail_timeout=30s;
    }
    

    upstream api-es {
        server 10.211.19.36:3070 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:3070 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:3070 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:3070 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:3070 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:3070 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:3070 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:3070 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:3070 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:3070 max_fails=2 fail_timeout=30s;
    }
    

    upstream asset_manager_api {
        server 10.211.19.36:7002 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:7002 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:7002 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:7002 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:7002 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:7002 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:7002 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:7002 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:7002 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:7002 max_fails=2 fail_timeout=30s;
    }
    

    upstream auth-handler-api {
        server 10.211.19.36:5025 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:5025 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:5025 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:5025 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:5025 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:5025 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:5025 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:5025 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:5025 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:5025 max_fails=2 fail_timeout=30s;
    }
    

    upstream auththermax-api {
        server 10.211.19.36:8917 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:8917 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:8917 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:8917 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:8917 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:8917 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:8917 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:8917 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:8917 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:8917 max_fails=2 fail_timeout=30s;
    }
    

    upstream autoblowdown-api-es {
        server 10.211.19.36:6117 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:6117 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:6117 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:6117 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:6117 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:6117 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:6117 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:6117 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:6117 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:6117 max_fails=2 fail_timeout=30s;
    }
    

    upstream boiler-efficiency-backcalculation-api {
        server 10.211.19.36:7051 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:7051 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:7051 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:7051 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:7051 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:7051 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:7051 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:7051 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:7051 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:7051 max_fails=2 fail_timeout=30s;
    }
    

    upstream calculation-data-api {
        server 10.211.19.36:5121 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:5121 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:5121 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:5121 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:5121 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:5121 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:5121 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:5121 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:5121 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:5121 max_fails=2 fail_timeout=30s;
    }
    

    upstream clonetags-api-es {
        server 10.211.19.36:7713 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:7713 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:7713 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:7713 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:7713 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:7713 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:7713 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:7713 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:7713 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:7713 max_fails=2 fail_timeout=30s;
    }
    

    upstream cooling-runhours-api {
        server 10.211.19.36:6118 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:6118 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:6118 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:6118 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:6118 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:6118 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:6118 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:6118 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:6118 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:6118 max_fails=2 fail_timeout=30s;
    }
    

    upstream coolingalmcount-api-es {
        server 10.211.19.36:6121 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:6121 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:6121 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:6121 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:6121 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:6121 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:6121 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:6121 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:6121 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:6121 max_fails=2 fail_timeout=30s;
    }
    

    upstream coolingcfpgen-api-es {
        server 10.211.19.36:6116 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:6116 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:6116 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:6116 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:6116 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:6116 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:6116 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:6116 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:6116 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:6116 max_fails=2 fail_timeout=30s;
    }
    

    upstream coolingelog-api-es {
        server 10.211.19.36:6111 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:6111 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:6111 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:6111 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:6111 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:6111 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:6111 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:6111 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:6111 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:6111 max_fails=2 fail_timeout=30s;
    }
    

    upstream coolingotherparams-api-es {
        server 10.211.19.36:6115 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:6115 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:6115 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:6115 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:6115 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:6115 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:6115 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:6115 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:6115 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:6115 max_fails=2 fail_timeout=30s;
    }
    

    upstream coolingpurge-api-es {
        server 10.211.19.36:6113 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:6113 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:6113 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:6113 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:6113 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:6113 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:6113 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:6113 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:6113 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:6113 max_fails=2 fail_timeout=30s;
    }
    

    upstream coolingstartshut-api-es {
        server 10.211.19.36:6114 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:6114 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:6114 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:6114 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:6114 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:6114 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:6114 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:6114 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:6114 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:6114 max_fails=2 fail_timeout=30s;
    }
    

    upstream coolingupavail-api-es {
        server 10.211.19.36:6112 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:6112 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:6112 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:6112 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:6112 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:6112 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:6112 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:6112 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:6112 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:6112 max_fails=2 fail_timeout=30s;
    }
    

    upstream data-api {
        server 10.211.19.36:5019 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:5019 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:5019 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:5019 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:5019 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:5019 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:5019 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:5019 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:5019 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:5019 max_fails=2 fail_timeout=30s;
    }
    

    upstream data-api-dev {
        server 10.211.19.36:5119 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:5119 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:5119 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:5119 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:5119 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:5119 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:5119 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:5119 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:5119 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:5119 max_fails=2 fail_timeout=30s;
    }
    

    upstream dev-ingest-api-es {
        server 10.211.19.36:4119 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:4119 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:4119 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:4119 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:4119 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:4119 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:4119 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:4119 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:4119 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:4119 max_fails=2 fail_timeout=30s;
    }
    

    upstream efficiency-calculations-api {
        server 10.211.19.36:5068 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:5068 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:5068 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:5068 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:5068 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:5068 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:5068 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:5068 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:5068 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:5068 max_fails=2 fail_timeout=30s;
    }
    

    upstream gettaginunit-api-es {
        server 10.211.19.36:7712 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:7712 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:7712 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:7712 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:7712 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:7712 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:7712 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:7712 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:7712 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:7712 max_fails=2 fail_timeout=30s;
    }
    

    upstream ingest-api-es {
        server 10.211.19.36:4019 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:4019 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:4019 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:4019 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:4019 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:4019 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:4019 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:4019 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:4019 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:4019 max_fails=2 fail_timeout=30s;
    }
    

    upstream lastlist-api {
        server 10.211.19.36:7100 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:7100 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:7100 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:7100 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:7100 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:7100 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:7100 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:7100 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:7100 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:7100 max_fails=2 fail_timeout=30s;
    }
    

    upstream mail-api-tmx {
        server 10.211.19.36:5004 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:5004 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:5004 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:5004 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:5004 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:5004 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:5004 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:5004 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:5004 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:5004 max_fails=2 fail_timeout=30s;
    }
    

    upstream model-api {
        server 10.211.19.36:5113 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:5113 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:5113 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:5113 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:5113 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:5113 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:5113 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:5113 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:5113 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:5113 max_fails=2 fail_timeout=30s;
    }
    
    upstream performance-api-thermax {
        server 10.211.19.36:5021 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:5021 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:5021 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:5021 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:5021 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:5021 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:5021 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:5021 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:5021 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:5021 max_fails=2 fail_timeout=30s;
    }
    
    upstream redis-api {
        server 10.211.19.36:5029 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:5029 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:5029 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:5029 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:5029 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:5029 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:5029 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:5029 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:5029 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:5029 max_fails=2 fail_timeout=30s;
    }
    
    upstream test-flask-api-es {
        server 10.211.19.36:6020 max_fails=2 fail_timeout=30s;
        server 10.211.19.37:6020 max_fails=2 fail_timeout=30s;
        server 10.211.19.38:6020 max_fails=2 fail_timeout=30s;
        server 10.211.19.48:6020 max_fails=2 fail_timeout=30s;
        server 10.211.19.44:6020 max_fails=2 fail_timeout=30s;
        server 10.211.19.45:6020 max_fails=2 fail_timeout=30s;
        server 10.211.19.46:6020 max_fails=2 fail_timeout=30s;
        server 10.211.19.49:6020 max_fails=2 fail_timeout=30s;
        server 10.211.19.43:6020 max_fails=2 fail_timeout=30s;
        server 10.211.19.50:6020 max_fails=2 fail_timeout=30s;
    }
    
  	large_client_header_buffers 4 16k;

	gzip on;

	# gzip_vary on;
	# gzip_proxied any;
	# gzip_comp_level 6;
	# gzip_buffers 16 8k;
	# gzip_http_version 1.1;
	# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

	##
	# Virtual Host Configs
	##

	#include /etc/nginx/conf.d/*.conf;
	#include /etc/nginx/sites-enabled/*;


	map $http_upgrade $connection_upgrade {
	    default upgrade;
	    ''      close;
	}

}
       server { # simple reverse-proxy
		listen 80 default_server;
		listen [::]:80 default_server ;
		server_name 10.211.19.36;
                client_max_body_size 300M;
                client_body_buffer_size 500M;
		chunked_transfer_encoding on;
		root /space/es-master/src/ui;

    		add_header X-Proxy-Cache $upstream_cache_status;

             	location /test/sensordata/cooling-dash-op-sum/cfpGen {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://coolingcfpgen-api-es;
            	}

                    location /portainer/ {
                         proxy_set_header        Host $http_host;
                         proxy_set_header        X-Real-IP $remote_addr;
                         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                         proxy_set_header        X-Forwarded-Proto $scheme;
                         proxy_set_header        X-Forwarded-Host $host;
                         proxy_set_header        X-Forwarded-Server $http_host;
                         proxy_pass http://portainer/;
                 }

location /swarmpit/ {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://localhost:888/;
                        #proxy_pass http://10.211.19.36:888/;
                }

location /explorer2 {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        #proxy_pass http://apies/explorer;
                        proxy_pass http://10.211.19.36:3071/explorer;
               }  

location /test/sensordata/reports/maintenanceSummary{
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://10.211.19.47:6120;
            }


 location /efficiency {
                     proxy_set_header        Host $http_host;
                     proxy_set_header        X-Real-IP $remote_addr;
                     proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                     proxy_set_header        X-Forwarded-Proto $scheme;
                     proxy_set_header        X-Forwarded-Host $host;
                     proxy_set_header        X-Forwarded-Server $http_host;
                     proxy_pass http://efficiency-calculations-api;
            }

location /batchefficiency {
                     proxy_set_header        Host $http_host;
                     proxy_set_header        X-Real-IP $remote_addr;
                     proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                     proxy_set_header        X-Forwarded-Proto $scheme;
                     proxy_set_header        X-Forwarded-Host $host;
                     proxy_set_header        X-Forwarded-Server $http_host;
                     proxy_pass http://boiler-efficiency-backcalculation-api;
            }  

location /test/sensordata/reports/autoblowdown{
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://autoblowdown-api-es;
            }

location /devflask3{
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://10.211.19.47:7773;
                }

 #location /test/sensordata/cooling/runhours{
 location /devflask3/cooling/runhours{
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://cooling-runhours-api;
            }

 location /test/sensordata/reports/setpoint {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://10.211.19.47:6119;
            }

 location /test/sensordata/reports/purgeReport {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://coolingpurge-api-es;

            }


location /test/sensordata/cooling/alarmCount {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://coolingalmcount-api-es;
            }

location /test/sensordata/cooling-elog {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://coolingelog-api-es;
            }

location /test/sensordata/cooling-dash-op-sum/parameters/otherParams {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://coolingotherparams-api-es;
            }

location /test/sensordata/cooling-dash-op-sum/uptimeAvail{
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://coolingupavail-api-es;
            }

location /test/sensordata/cooling-dash-op-sum/parameters/details {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://coolingstartshut-api-es;
            }

         
              location /ingest3 {
                  auth_request /authmiddle;
                  proxy_set_header        Host $http_host;
                  proxy_set_header        X-Real-IP $remote_addr;
                  proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                  proxy_set_header        X-Forwarded-Proto $scheme;
                  proxy_set_header        X-Forwarded-Host $host;
                  proxy_set_header        X-Forwarded-Server $http_host;
                  proxy_set_header        X-Forwarded-Port 443;
                  proxy_pass http://localhost:5022;
             }

            location /direct-efficiency-thermax {
                  proxy_set_header        Host $http_host;
                  proxy_set_header        X-Real-IP $remote_addr;
                  proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                  proxy_set_header        X-Forwarded-Proto $scheme;
                  proxy_set_header        X-Forwarded-Host $host;
                  proxy_set_header        X-Forwarded-Server $http_host;
                  #proxy_pass http://localhost:1883;
                  alias /space/es-master/src/direct-efficiency-thermax;
              }

            location /d {
                  proxy_set_header        Host $http_host;
                  proxy_set_header        X-Real-IP $remote_addr;
                  proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                  proxy_set_header        X-Forwarded-Proto $scheme;
                  proxy_set_header        X-Forwarded-Host $host;
                  proxy_set_header        X-Forwarded-Server $http_host;
                  alias /space/es-master/uploads/static;
                 }

        location /pulse-deploy {
                  proxy_set_header        Host $http_host;
                  proxy_set_header        X-Real-IP $remote_addr;
                  proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                  proxy_set_header        X-Forwarded-Proto $scheme;
                  proxy_set_header        X-Forwarded-Host $host;
                  proxy_set_header        X-Forwarded-Server $http_host;
                  proxy_pass http://10.211.19.36:5011;
           }
           
        location /pulse-files/email-logos {
              proxy_set_header        Host $http_host;
              proxy_set_header        X-Real-IP $remote_addr;
              proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
              proxy_set_header        X-Forwarded-Proto $scheme;
              proxy_set_header        X-Forwarded-Host $host;
              proxy_set_header        X-Forwarded-Server $http_host;
              alias /space/es-master/src/pulse-files/email-logos;
          }
 

            
           location /pulse-data/service/rotary-assets-overview {
                          proxy_set_header        Host $http_host;
                          proxy_set_header        X-Real-IP $remote_addr;
                          proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                          proxy_set_header        X-Forwarded-Proto $scheme;
                          proxy_set_header        X-Forwarded-Host $host;
                          proxy_set_header        X-Forwarded-Server $http_host;
                         # proxy_pass http://10.13.1.96:10091;
                          proxy_pass http://localhost:10191/pulse-data/service/rotary-assets-overview;
                  }
           location /pulse-data/service/rotary-assets-pm {
                         proxy_set_header        Host $http_host;
                         proxy_set_header        X-Real-IP $remote_addr;
                         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                         proxy_set_header        X-Forwarded-Proto $scheme;
                         proxy_set_header        X-Forwarded-Host $host;
                         proxy_set_header        X-Forwarded-Server $http_host;
                        # proxy_pass http://10.13.1.96:10193;
                         proxy_pass http://localhost:10293/pulse-data/service/rotary-assets-pm;
                 }
          location /pulse-data/service/rotary-assets-runcycles {
                         proxy_set_header        Host $http_host;
                         proxy_set_header        X-Real-IP $remote_addr;
                         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                         proxy_set_header        X-Forwarded-Proto $scheme;
                         proxy_set_header        X-Forwarded-Host $host;
                         proxy_set_header        X-Forwarded-Server $http_host;
                         #proxy_pass http://10.13.1.96:10177;
                         proxy_pass http://localhost:10107/pulse-data/service/rotary-assets-runcycles;
                 }
            location /pulse-data/tasks {
                         proxy_set_header        Host $http_host;
                         proxy_set_header        X-Real-IP $remote_addr;
                         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                         proxy_set_header        X-Forwarded-Proto $scheme;
                         proxy_set_header        X-Forwarded-Host $host;
                         proxy_set_header        X-Forwarded-Server $http_host;
                         proxy_pass http://localhost:64535/pulse-data/tasks;
                         #proxy_pass http://localhost:65535;
                 }

            location /weather-service {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://localhost:5020/weather-service;
                }
                
           location /heating {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://localhost:5364;
                 }

        location /kairosapi/api/v1/datapoints {
 		#auth_basic “Administrator”;
                #auth_basic_user_file /etc/nginx/.htkairos;
		proxy_set_header        Host $http_host;
		proxy_set_header        X-Real-IP $remote_addr;
		proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header        X-Forwarded-Proto $scheme;
		proxy_set_header        X-Forwarded-Host $host;
		proxy_set_header        X-Forwarded-Server $http_host;
		proxy_set_header        X-Forwarded-Port 443;	
		proxy_pass http://10.211.19.37:8080/api/v1/datapoints;
        }

        location /kairosapi/api/v1/datapoints/query {
 		#auth_basic “Administrator”;
                #auth_basic_user_file /etc/nginx/.htkairos;
		proxy_set_header        Host $http_host;
		proxy_set_header        X-Real-IP $remote_addr;
		proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header        X-Forwarded-Proto $scheme;
		proxy_set_header        X-Forwarded-Host $host;
		proxy_set_header        X-Forwarded-Server $http_host;
		proxy_set_header        X-Forwarded-Port 443;	
		proxy_pass http://10.211.19.39:8080/api/v1/datapoints/query;
        }

        location /spaceapi/api/v1/datapoints  {
                #auth_basic “Administrator”;
                # auth_basic_user_file /etc/nginx/.htkairos;
                proxy_set_header        Host $http_host;
                proxy_set_header        X-Real-IP $remote_addr;
                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header        X-Forwarded-Proto $scheme;
                proxy_set_header        X-Forwarded-Host $host;
                proxy_set_header        X-Forwarded-Server $http_host;
                proxy_set_header        X-Forwarded-Port 443;
                proxy_pass http://10.211.19.37:8080/api/v1/datapoints;
        }

        location /spaceapi/api/v1/datapoints/query {
                #auth_basic “Administrator”;
                #auth_basic_user_file /etc/nginx/.htkairos;
		proxy_set_header        Host $http_host;
		proxy_set_header        X-Real-IP $remote_addr;
		proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header        X-Forwarded-Proto $scheme;
		proxy_set_header        X-Forwarded-Host $host;
		proxy_set_header        X-Forwarded-Server $http_host;
		proxy_set_header        X-Forwarded-Port 443;	
		proxy_pass http://10.211.19.37:8080/api/v1/datapoints/query;
        }


        location /spacedata/ {
                auth_basic “Administrator”;
                auth_basic_user_file /etc/nginx/.htkairos;
                proxy_set_header        Host $http_host;
                proxy_set_header        X-Real-IP $remote_addr;
                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header        X-Forwarded-Proto $scheme;
                proxy_set_header        X-Forwarded-Host $host;
                proxy_set_header        X-Forwarded-Server $http_host;
                proxy_set_header        X-Forwarded-Port 443;
                proxy_pass http://10.211.19.37:8080/;
        }
        
        location /exactdata/ {
                auth_basic “Administrator”;
                auth_basic_user_file /etc/nginx/.htkairos;
		proxy_set_header        Host $http_host;
		proxy_set_header        X-Real-IP $remote_addr;
		proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header        X-Forwarded-Proto $scheme;
		proxy_set_header        X-Forwarded-Host $host;
		proxy_set_header        X-Forwarded-Server $http_host;
		proxy_set_header        X-Forwarded-Port 443;	
		proxy_pass http://kairosdb/;
		#proxy_pass http://10.211.19.38:8080/;
        }


location /vmstatus {
    return 200 'VM UP';
    # because default content-type is application/octet-stream,
    # browser will offer to "save the file"...
    # if you want to see reply in browser, uncomment next line
    add_header Content-Type text/plain;
}
                location /pulse-ui-v2 {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://localhost:9005/;
                    alias /space/es-master/src/ui/pulse-ui-v2;
		    #proxy_pass  http://10.211.19.37;
                }

                 location /rama-pulse-ui-v2 {
                     proxy_set_header        Host $http_host;
                     proxy_set_header        X-Real-IP $remote_addr;
                     proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                     proxy_set_header        X-Forwarded-Proto $scheme;
                     proxy_set_header        X-Forwarded-Host $host;
                     proxy_set_header        X-Forwarded-Server $http_host;
                     alias /space/es-master/src/ui/rama-pulse-ui-v2;
                 }

               location /jupyter/{
                       proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://10.211.19.39:8888/;

                }

		 location /favicon.ico  {
proxy_set_header        Host $http_host;
proxy_set_header        X-Real-IP $remote_addr;
proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header        X-Forwarded-Proto $scheme;
proxy_set_header        X-Forwarded-Host $host;
proxy_set_header        X-Forwarded-Server $http_host;

		alias /space/es-master/src/ui/favicon.ico ;
		 }
		location /pulse-ux-rama {
                     proxy_set_header        Host $http_host;
                     proxy_set_header        X-Real-IP $remote_addr;
                     proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                     proxy_set_header        X-Forwarded-Proto $scheme;
                     proxy_set_header        X-Forwarded-Host $host;
                     proxy_set_header        X-Forwarded-Server $http_host;
                     #proxy_pass http://localhost:9005/;
                     alias /space/es-master/src/ui/pulse-ux-rama;

                 }

                location /pulse-ux2 {
                     proxy_set_header        Host $http_host;
                     proxy_set_header        X-Real-IP $remote_addr;
                     proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                     proxy_set_header        X-Forwarded-Proto $scheme;
                     proxy_set_header        X-Forwarded-Host $host;
                     proxy_set_header        X-Forwarded-Server $http_host;
                     alias /space/es-master/src/ui/pulse-ux2;

                 }


 location /edge-demo {
                      proxy_set_header        Host $http_host;
                      proxy_set_header        X-Real-IP $remote_addr;
                      proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                      proxy_set_header        X-Forwarded-Proto $scheme;
                      proxy_set_header        X-Forwarded-Host $host;
                      proxy_set_header        X-Forwarded-Server $http_host;
                      #proxy_pass http://localhost:9005/;
                      alias /space/es-master/src/ui/edge-demo;

                  }



   location /unitReport {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    alias /space/es-master/src/ui/unitReport;

                }
                location /pulse-ui-v3 {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://localhost:9005/;
                    alias /space/es-master/src/ui/pulse-ui-v3;

                }

   location /pulse-v2 {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://localhost:9005/;
                    alias /space/es-master/src/ui/pulse-v2;

                }

   location /nx {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://localhost:9005/;
                    alias /space/es-master/src/ui/nx;

                }


  location /auththermax {
                   proxy_set_header        Host $http_host;
                   proxy_set_header        X-Real-IP $remote_addr;
                   proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                   proxy_set_header        X-Forwarded-Proto $scheme;
                   proxy_set_header        X-Forwarded-Host $host;
                   proxy_set_header        X-Forwarded-Server $http_host;
                   proxy_pass http://auththermax-api;
		   #proxy_pass http://auththermax-api;

               }


                 location /ramona {
                         proxy_set_header        Host $http_host;
                         proxy_set_header        X-Real-IP $remote_addr;
                         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                         proxy_set_header        X-Forwarded-Proto $scheme;
                         proxy_set_header        X-Forwarded-Host $host;
                         proxy_set_header        X-Forwarded-Server $http_host;
                         proxy_pass http://localhost:8081/ramona;
                }


location /performanceui-test {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://asset_manager_api;
}

location /wws-flask1 {

client_body_buffer_size     32k;
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://10.211.19.47:9098;

}



location /userprofile/upsert {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://10.211.19.37/userprofile/upsert;
}
location /edge-status {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://10.211.19.37/edge-status;
}

location = /exactapi/Users/logout {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://auth-handler-api;
}

location = /exactapi/Users/login {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://auth-handler-api;
}

location /performanceui {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        #proxy_pass http://performance-api-thermax;
                        proxy_pass http://performance-api-thermax;
}

location /boiler-sensordata {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://10.211.19.47:6661;
}


location /exactshell {
                proxy_set_header        Host $http_host;
                proxy_set_header        X-Real-IP $remote_addr;
                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header        X-Forwarded-Proto $scheme;
                proxy_set_header        X-Forwarded-Host $host;
                proxy_set_header        X-Forwarded-Server $http_host;
                proxy_set_header        X-Forwarded-Port 443;
                proxy_pass http://10.211.19.37/exactshell;
        }

location /static {
                proxy_set_header        Host $http_host;
                proxy_set_header        X-Real-IP $remote_addr;
                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header        X-Forwarded-Proto $scheme;
                proxy_set_header        X-Forwarded-Host $host;
                proxy_set_header        X-Forwarded-Server $http_host;
                proxy_set_header        X-Forwarded-Port 443;
                proxy_pass http://10.211.19.37/static;
        }


location /jupyterq {
        proxy_pass http://10.211.19.39:8888;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

        # websocket headers
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $connection_upgrade;
        proxy_set_header X-Scheme $scheme;

        proxy_buffering off;
    }

        location /admin-v3 {
                proxy_set_header        Host $http_host;
                proxy_set_header        X-Real-IP $remote_addr;
                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header        X-Forwarded-Proto $scheme;
                proxy_set_header        X-Forwarded-Host $host;
                proxy_set_header        X-Forwarded-Server $http_host;
                alias /space/es-master/src/ui/admin-v3;
        }


        location /pulse-cooling {
                proxy_set_header        Host $http_host;
                proxy_set_header        X-Real-IP $remote_addr;
                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header        X-Forwarded-Proto $scheme;
                proxy_set_header        X-Forwarded-Host $host;
                proxy_set_header        X-Forwarded-Server $http_host;
                alias /space/es-master/src/ui/pulse-cooling;
        }

#location /admin-v2 {
#root /space/es-master/src/ui/admin-v2;
#}

	location / {
		#root /var/www/html;
		root /space/es-master/src/ui/pulse-ux;
	}

#	location =  /authproxy {
#            proxy_pass https://apim-cin-thermax-dev.azure-api.net/userapi/api/um/auth/validateJwt;
#         }

	location = /auth {
           internal;
           set $query '';

           # get param

           if ($request_uri ~* "[?&]access_token=([^&#\n]+).*$") {
               set $query "Bearer $1";
           }

           # header based auth
           if ($request_uri !~* "[?&]access_token=([^&#\n]+).*$") {
                set $query $http_authorization;
           }
           #return 200;
           proxy_set_header  Authorization $query;
           proxy_pass http://localhost/authproxy;
           #proxy_pass https://apim-cin-thermax-dev.azure-api.net/userapi/api/um/auth/validateJwt;
           #proxy_pass_request_body on;        # no data is being transferred...
           proxy_pass_request_body off;        # no data is being transferred...
           proxy_set_header Host $host;        # Custom headers with authentication related data
           proxy_set_header X-Forwarded-Host $host;
           proxy_set_header X-t $http_authorization;
           client_max_body_size 300M;
           client_body_buffer_size 500M;
         }

	location = /auth2 {
           internal;
           set $query '';
           if ($request_uri ~* "[^\?]+\?(.*)$") {
              set $query $1;
           }
           return 200;
           proxy_pass http://apies/exactapi/Licenses/count?$query;
           proxy_pass_request_body off;        # no data is being transferred...
           proxy_set_header Host $host;        # Custom headers with authentication related data
           proxy_set_header Content-Length '0';
           proxy_set_header X-Origin-URI $request_uri;
           proxy_set_header X-Forwarded-Host $host;
		fastcgi_buffers 8 16k;
		fastcgi_buffer_size 32k;

		client_max_body_size 300M;
		client_body_buffer_size 128k;

         }

          location = /authmiddle {
		internal;
             set $query '';
 
             # get param
 
             if ($request_uri ~* "[?&]access_token=([^&#\n]+).*$") {
                 set $query "Bearer $1";
             }
 
             # header based auth
             if ($request_uri !~* "[?&]access_token=([^&#\n]+).*$") {
                  set $query $http_authorization;
             }
	     return 200;
             proxy_set_header  Authorization $query;
             proxy_pass http://localhost/auththermax;
             #proxy_pass https://apim-cin-thermax-dev.azure-api.net/userapi/api/um/auth/validateJwt;
             proxy_pass_request_body on;        # no data is being transferred...
             proxy_set_header Content-Length '0';
 	     #proxy_pass_request_body off;        # no data is being transferred...
             proxy_set_header Host $host;        # Custom headers with authentication related data
             proxy_set_header X-Forwarded-Host $host;
             proxy_set_header X-t $http_authorization;
           }
	
	location = /authc {
           internal;
           set $query '';
           if ($request_uri ~* "[^\?]+\?(.*)$") {
              set $query $1;
           }
	   proxy_pass http://localhost/auththermax;
           #proxy_pass_request_body off;        # no data is being transferred...
           proxy_pass_request_body on;
           proxy_set_header Host $host;        # Custom headers with authentication related data
           proxy_set_header Content-Length '0';
           proxy_set_header X-Origin-URI $request_uri;
           proxy_set_header X-Forwarded-Host $host;
         }

         location /dv-ingest {
              #auth_request /authmiddle;
           #return 200;
              proxy_set_header        Host $http_host;
              proxy_set_header        X-Real-IP $remote_addr;
              proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
              proxy_set_header        X-Forwarded-Proto $scheme;
              proxy_set_header        X-Forwarded-Host $host;
              proxy_set_header        X-Forwarded-Server $http_host;
              proxy_pass http://10.211.19.47:3802;
           }


 
        # # If the user is not logged in, redirect them to login URL
         location @error401 {
           return 302 /pulse-ui;
         }

         location =  /exactapi/appexceptions {
	     auth_request /authmiddle;   # The sub-request to use
             return 200 'VM UP';

#             proxy_set_header        Host $http_host;
#             proxy_set_header        X-Real-IP $remote_addr;
#             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
#             proxy_set_header        X-Forwarded-Proto $scheme;
#             proxy_set_header        X-Forwarded-Host $host;
#             proxy_set_header        X-Forwarded-Server $http_host;
#                  proxy_pass http://apies;
          }


 	location /apitest {
             auth_request /authmiddle;   # The sub-request to use
             return 200 'VM UP';
#proxy_set_header        Host $http_host;
             #proxy_set_header        X-Real-IP $remote_addr;
             #proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             #proxy_set_header        X-Forwarded-Proto $scheme;
             #proxy_set_header        X-Forwarded-Host $host;
             #proxy_set_header        X-Forwarded-Server $http_host;
		#proxy_pass http://apies/exactapi/units;
         }

location ~ .(/calculations)$ {
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             #proxy_pass http://apies;
             proxy_pass http://apies;
          }
	location /exactapi/faultTemplates {
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             #proxy_pass http://apies;
             proxy_pass http://apies;
          }
         location = /exactapi/attachments/data-points/upload {
             client_max_body_size 300M;
             client_body_buffer_size 1000M;
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             #proxy_pass http://apies;
	     proxy_pass http://apies;
          }
         #location /exactapi/Users {
            # proxy_set_header        Host $http_host;
            # proxy_set_header        X-Real-IP $remote_addr;
            # proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
            # proxy_set_header        X-Forwarded-Proto $scheme;
            # proxy_set_header        X-Forwarded-Host $host;
            # proxy_set_header        X-Forwarded-Server $http_host;
            # proxy_pass http://apies;
         #}

         location  /exactapi/userprofiles {
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             #proxy_pass http://apies;
	     proxy_pass http://apies;
         }
         location = /esm/alohomora {
                auth_basic “Administrator”;
                auth_basic_user_file /etc/nginx/.htkairos;
    		add_header Content-Type text/plain always;
                alias  /space/es-master/src/alohomora/auth.txt;
	}
        # location = /exactapi/users/login {
        #     proxy_set_header        Host $http_host;
        #     proxy_set_header        X-Real-IP $remote_addr;
        #     proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        #     proxy_set_header        X-Forwarded-Proto $scheme;
        #     proxy_set_header        X-Forwarded-Host $host;
        #     proxy_set_header        X-Forwarded-Server $http_host;
        #     proxy_pass http://apies;
        #     }
         #location = /exactapi/users {
            # proxy_set_header        Host $http_host;
            # proxy_set_header        X-Real-IP $remote_addr;
            # proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
            # proxy_set_header        X-Forwarded-Proto $scheme;
            # proxy_set_header        X-Forwarded-Host $host;
            # proxy_set_header        X-Forwarded-Server $http_host;
            # proxy_pass http://apies;
         #}
         #location = /exactapi/users/reset {
            # proxy_set_header        Host $http_host;
            # proxy_set_header        X-Real-IP $remote_addr;
            # proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
            # proxy_set_header        X-Forwarded-Proto $scheme;
            # proxy_set_header        X-Forwarded-Host $host;
            # proxy_set_header        X-Forwarded-Server $http_host;
            # proxy_pass http://apies;
	#}
         #location = /exactapi/Users/reset-password {
             #proxy_set_header        Host $http_host;
             #proxy_set_header        X-Real-IP $remote_addr;
             #proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             #proxy_set_header        X-Forwarded-Proto $scheme;
             #proxy_set_header        X-Forwarded-Host $host;
             #proxy_set_header        X-Forwarded-Server $http_host;
             #proxy_pass http://apies;
         #}
         location /exactapi/clients/auth {
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             #proxy_pass http://apies;
	     proxy_pass http://apies;
         }

        location /exactapi/attachments/incidents {
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             #proxy_pass http://apies;
	     proxy_pass http://apies;
         }
         location = /exactapi/attachments/incidents/upload {
		client_body_buffer_size    1000M;
		client_max_body_size 300M;

             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             #proxy_pass http://apies;
	     proxy_pass http://apies;
          }

        # location /incidentsdelete {
        #     proxy_set_header        Host $http_host;
        #     proxy_set_header        X-Real-IP $remote_addr;
        #     proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        #     proxy_set_header        X-Forwarded-Proto $scheme;
        #     proxy_set_header        X-Forwarded-Host $host;
        #     proxy_set_header        X-Forwarded-Server $http_host;
        #     proxy_pass http://apies/exactapi/incidents;
        # }


         location /exactapi/incidents {
            if ($request_method = DELETE) {
                    return 200;
               }
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             proxy_pass http://apies;
         }

         location /exactapi/clients {
	     proxy_cache_methods GET HEAD;
             proxy_cache mycache;
    	     proxy_cache_valid 30m;
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
	     proxy_pass http://apies;
         }


         location /exactapi/units/alter {
             proxy_cache_methods GET HEAD;
             proxy_cache mycache;
             proxy_cache_valid 1440m;
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             proxy_pass http://apies;
         }

         location /exactapi/customers/alter {
             proxy_cache_methods GET HEAD;
             proxy_cache mycache;
             proxy_cache_valid 1440m;  
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             proxy_pass http://apies;
         }

         location /exactapi/incidents/alter {
             proxy_cache_methods GET HEAD;
             proxy_cache mycache;
             proxy_cache_valid 10m;
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             proxy_pass http://apies;
         }


         location /exactapi/configs {
	     proxy_cache_methods GET HEAD;
             proxy_cache mycache;
    	     proxy_cache_valid 1440m;
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
	     proxy_pass http://apies;
         }

        location ~ /exactapi/units/(.*)/heatrates {
             proxy_cache_methods GET HEAD;
             proxy_cache mycache;
             proxy_cache_valid 1440m;
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             proxy_pass http://apies;
         }

                location /exactapi/sites {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://apies;
		    proxy_pass http://apies;
                }

           location ~ /exactapi/units/(.*)/tagmeta {
               proxy_set_header        Host $http_host;
               proxy_set_header        X-Real-IP $remote_addr;
               proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
               proxy_set_header        X-Forwarded-Proto $scheme;
               proxy_set_header        X-Forwarded-Host $host;
               proxy_set_header        X-Forwarded-Server $http_host;
               #proxy_pass http://apies;
	       proxy_pass http://apies;
           }
 
        location /exactapi {
	     client_body_buffer_size    1000M;
             #error_page 401 = @error401; # Specific login page to use
             auth_request /authmiddle;   # The sub-request to use
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             proxy_pass http://apies;
         }

         #location ~ /exactapi/(.*)/customers {
         location /exactapi/customers {
	     client_body_buffer_size    1000M;
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             #proxy_pass http://apies;
	     proxy_pass http://apies;
         }

        location /v2/ingest {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_set_header        X-Forwarded-Port 443;
                        proxy_pass http://localhost:4013;
                }

                location /v1/ingest/ts-ingest {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://localhost:4016;
                }

	location /ingest/highfreq {
                        return 204;
                }


	location /ingest {
			client_max_body_size 10M;
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_set_header        X-Forwarded-Port 443;
			proxy_pass http://ingest-api-es;
                }



	location /opc-network {
              		auth_request /authmiddle;
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_set_header        X-Forwarded-Port 443;
			#proxy_pass http://apies/exactapi/dashboards;
			proxy_pass http://apies/exactapi/dashboards;
                }


location /pulse-ui-tmx {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://localhost:9003/;
                    alias /space/es-master/src/ui/pulse-ui-tmx/;
                }



                location /pulse-ui {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://localhost:9003/;
		    alias /space/es-master/src/ui/pulse-ui/;
                }

 location /pulse-ux {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    alias /space/es-master/src/ui/pulse-ux/;
                }


 location /pulse-ux-nishanthan {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    alias /space/es-master/src/ui/pulse-ux-nishanthan/;
                }
 


location /pulse-admin-ui1 {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    alias /space/es-master/src/ui/pulse-admin-ui1/;
                }


                location /pulse-ui-ux {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    alias /space/es-master/src/ui/pulse-ui-ux/;
                }


                location /pulse-ui-v2-nj {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://localhost:9003/;
                    alias /space/es-master/src/ui/pulse-ui-v2-nj/;
                }

          #      location /exact-docs {
          #          proxy_set_header        Connection  "upgrade";
          #          proxy_set_header        Host $http_host;
          #          proxy_set_header        X-Forwarded-Host $host;
          #          proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
          #          proxy_set_header        X-Forwarded-Proto $scheme;
          #          proxy_set_header        X-Real-IP $remote_addr;
          #          proxy_set_header        X-Forwarded-Server $http_host;
          #          proxy_pass http://10.211.19.39:/;
          #      }
          #   location /_assets {
          #          proxy_set_header        Connection  "upgrade";
          #          proxy_set_header        Host $http_host;
          #          proxy_set_header        X-Forwarded-Host $host;
          #          proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
          #          proxy_set_header        X-Forwarded-Proto $scheme;
          #          proxy_set_header        X-Real-IP $remote_addr;
          #          proxy_set_header        X-Forwarded-Server $http_host;
          #          proxy_pass http://10.211.19.39/_assets;
          #      }

                location /admin-v2-buhome2 {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://localhost:9003/;
                    alias /space/es-master/src/ui/admin-v2-buhome2/;
                }

                location /essera {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://13.251.5.125/essera;
                }

                location /pulse-admin-ui {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://10.211.19.37;
                }

                #location /pulse-admin-ui {
                #    proxy_set_header        Host $http_host;
                #    proxy_set_header        X-Real-IP $remote_addr;
                #    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                #    proxy_set_header        X-Forwarded-Proto $scheme;
                #    proxy_set_header        X-Forwarded-Host $host;
                #    proxy_set_header        X-Forwarded-Server $http_host;
                #    proxy_pass http://localhost:9004/;
                #}
		location /pulse-ui-incidentsTest {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    alias /space/es-master/src/ui/pulse-ui-incidentsTest;
                }
  location /pulse-v2-faulttrees {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    alias /space/es-master/src/ui/pulse-v2-faulttrees;
                }


	location /admin-v2 {
		proxy_set_header        Host $http_host;
		proxy_set_header        X-Real-IP $remote_addr;
		proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header        X-Forwarded-Proto $scheme;
		proxy_set_header        X-Forwarded-Host $host;
		proxy_set_header        X-Forwarded-Server $http_host;
		alias /space/es-master/src/ui/admin-v2;
	}

               location /mqtt {
			# prevents 502 bad gateway error
                        proxy_buffers 8 32k;
                        proxy_buffer_size 64k;

                        proxy_pass http://10.211.19.37/mqtt;
                        proxy_set_header X-Real-IP $remote_addr;
                        proxy_set_header Host $http_host;
                        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

                        # enables WS support
                        proxy_http_version 1.1;
                        proxy_set_header Upgrade $http_upgrade;
                        proxy_set_header Connection "upgrade";

                        proxy_read_timeout 999999999;
                }
                location /pulse-files {
                        alias /space/es-master/src/ui/pulse-files;
			    autoindex on;

                }
                location /service{
                        auth_request /authmiddle;   # The sub-request to use
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://localhost:8096;
                }

                location /stackapi {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://localhost:8098;
                }

                location /report {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        #proxy_pass http://10.211.19.46:3091;
                        proxy_pass http://10.211.19.39:3091;
                }

                location /deployimage {
                        #auth_request /authmiddle;   # The sub-request to use
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://10.211.19.36:8189;
                }

                location /es-update2 {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://10.211.19.36:8189;
                }

		location /explorer {
			proxy_set_header        Host $http_host;
			proxy_set_header        X-Real-IP $remote_addr;
			proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header        X-Forwarded-Proto $scheme;
			proxy_set_header        X-Forwarded-Host $host;
			proxy_set_header        X-Forwarded-Server $http_host;
			#proxy_pass http://apies/explorer;
			proxy_pass http://apies/explorer;
                }

                location /streaming {
             		auth_request /authmiddle;   # The sub-request to use
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                	proxy_pass http://10.211.19.39:7000;
		}



                location /sensordata{
             		#auth_request /authmiddle;   # The sub-request to use
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
			proxy_pass http://a1:5049;

                }

                location /sensordata/absolutefast{
                        #auth_request /authmiddle;   # The sub-request to use
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://a1:5059;

                }

                 location /sensordata/absolutefastplot{
                         #auth_request /authmiddle;   # The sub-request to use
                         proxy_set_header        Host $http_host;
                         proxy_set_header        X-Real-IP $remote_addr;
                         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                         proxy_set_header        X-Forwarded-Proto $scheme;
                         proxy_set_header        X-Forwarded-Host $host;
                         proxy_set_header        X-Forwarded-Server $http_host;
                         proxy_pass http://a1:5059;
 
                 }

                   location /sensordata/shadow {
                           proxy_set_header        Host $http_host;
                           proxy_set_header        X-Real-IP $remote_addr;
                           proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                           proxy_set_header        X-Forwarded-Proto $scheme;
                           proxy_set_header        X-Forwarded-Host $host;
                           proxy_set_header        X-Forwarded-Server $http_host;
                           proxy_pass http://redis-api;
                   }

		 location /sensordata/notification/push {
                        auth_request /authmiddle;   # The sub-request to use
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        #proxy_pass http://10.211.19.39:5049;
                        proxy_pass http://localhost:7019;

                }
		
		 location /devflask1{
			 auth_request /authmiddle;   # The sub-request to use
                         proxy_set_header        Host $http_host;
                         proxy_set_header        X-Real-IP $remote_addr;
                         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                         proxy_set_header        X-Forwarded-Proto $scheme;
                         proxy_set_header        X-Forwarded-Host $host;
                         proxy_set_header        X-Forwarded-Server $http_host;
                         #proxy_pass http://10.211.19.47/devflask1;
                         proxy_pass http://10.211.19.38:7771;

                 }
		location /devflask2{
			   auth_request /authmiddle;   # The sub-request to use
                           proxy_set_header        Host $http_host;
                           proxy_set_header        X-Real-IP $remote_addr;
                           proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                           proxy_set_header        X-Forwarded-Proto $scheme;
                           proxy_set_header        X-Forwarded-Host $host;
                           proxy_set_header        X-Forwarded-Server $http_host;
                           proxy_pass http://10.211.19.47:7772;
                  }
        	#location /devflask3{
        	#	   auth_request /authmiddle;   # The sub-request to use
              #            proxy_set_header        Host $http_host;
              #            proxy_set_header        X-Real-IP $remote_addr;
              #            proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
              #            proxy_set_header        X-Forwarded-Proto $scheme;
              #            proxy_set_header        X-Forwarded-Host $host;
              #            proxy_set_header        X-Forwarded-Server $http_host;
              #            proxy_pass http://10.211.19.38/devflask3;
              #   }
		location /test2/sensordata{
                        #auth_request /auth;   # The sub-request to use
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://localhost:6021;

                }

		location /test3/sensordata{
                        #auth_request /auth;   # The sub-request to use
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://localhost:6022;

                }

 		location /test/sensordata{
                        #auth_request /auth;   # The sub-request to use
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://test-flask-api-es;
                        #proxy_pass http://localhost:6019;
			#proxy_pass http://10.211.19.38/test/sensordata;
                }

		 #location /test/sensordata{
                  #      proxy_set_header        Host $http_host;
                   #     proxy_set_header        X-Real-IP $remote_addr;
                    #    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                     #   proxy_set_header        X-Forwarded-Proto $scheme;
                      #  proxy_set_header        X-Forwarded-Host $host;
                       # proxy_set_header        X-Forwarded-Server $http_host;

                       #proxy_pass http://localhost:7021;
                #}

                location /fouling-analytics {
			proxy_read_timeout 300;
			   proxy_connect_timeout 300;
			   proxy_send_timeout 300;
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://10.211.19.47:5032;

                }
                location /tco-Predictor{
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        #proxy_pass http://localhost:5023;
			proxy_pass http://10.211.19.38/tco-Predictor;

                }

                location /mvr-calculations{
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://10.211.19.39:5024;

                }
                location /calculationdata {
                        #auth_request /authmiddle;   # The sub-request to use
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://calculation-data-api;
			#proxy_pass http://calculation-data-api;

                }


                location ~* /sensordata/.+/lastlist$ {
             		#auth_request /authmiddle;   # The sub-request to use
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
			#proxy_pass http://localhost:7099;
			proxy_pass http://lastlist-api;
                }

		location /mail {
             	   #auth_request /authmiddle;   # The sub-request to use
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://a10:5003;
                    proxy_pass http://localhost:5003;
		    #proxy_pass http://mail-api-tmx;
                }

		location /model {
             	    #auth_request /authmiddle;   # The sub-request to use
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://localhost:5013;
                    proxy_pass http://model-api;
        	}

		location /outages {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://localhost:3096;
        	}
        location /grafana/ {
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "Upgrade";
            proxy_set_header Host $http_host;
            proxy_pass http://10.211.19.37/grafana/;
        }
		 location /nstats.html {
proxy_set_header        Host $http_host;
proxy_set_header        X-Real-IP $remote_addr;
proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header        X-Forwarded-Proto $scheme;
proxy_set_header        X-Forwarded-Host $host;
proxy_set_header        X-Forwarded-Server $http_host;

		alias /space/es-master/src/ui/nstats.html;
		 }


		 location /flow.html {
		auth_basic “Administrator”;
                auth_basic_user_file /etc/nginx/.htkairos;
proxy_set_header        Host $http_host;
proxy_set_header        X-Real-IP $remote_addr;
proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header        X-Forwarded-Proto $scheme;
proxy_set_header        X-Forwarded-Host $host;
proxy_set_header        X-Forwarded-Server $http_host;

		alias /space/es-master/src/ui/flow.html;
		 }
location /feedlost.html {
 proxy_set_header        Host $http_host;
 proxy_set_header        X-Real-IP $remote_addr;
 proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
 proxy_set_header        X-Forwarded-Proto $scheme;
 proxy_set_header        X-Forwarded-Host $host;
 proxy_set_header        X-Forwarded-Server $http_host;

                 alias /space/es-master/src/ui/feedlost.html;
                  }

location /backfill.html {
proxy_set_header        Host $http_host;
 proxy_set_header        X-Real-IP $remote_addr;
proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header        X-Forwarded-Proto $scheme;
proxy_set_header        X-Forwarded-Host $host;
proxy_set_header        X-Forwarded-Server $http_host;
                 alias /space/es-master/src/ui/backfill.html;
                   }
location /feedlost.json {
 proxy_set_header        Host $http_host;
 proxy_set_header        X-Real-IP $remote_addr;
 proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
 proxy_set_header        X-Forwarded-Proto $scheme;
 proxy_set_header        X-Forwarded-Host $host;
 proxy_set_header        X-Forwarded-Server $http_host;

                 alias /space/es-master/src/ui/feedlost.json;
                  }

location /infra_status.html {
proxy_set_header        Host $http_host;
proxy_set_header        X-Real-IP $remote_addr;
proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header        X-Forwarded-Proto $scheme;
proxy_set_header        X-Forwarded-Host $host;
proxy_set_header        X-Forwarded-Server $http_host;

                alias /space/es-master/src/ui/infra_status.html;
                 }
 }


	server {
		listen 3000 default_server;
		listen [::]:3000 default_server ;
		server_name 10.211.19.36;
		client_max_body_size 0;
		chunked_transfer_encoding on;
		root /space/es-master/src/ui;

location /batchefficiency {
                     proxy_set_header        Host $http_host;
                     proxy_set_header        X-Real-IP $remote_addr;
                     proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                     proxy_set_header        X-Forwarded-Proto $scheme;
                     proxy_set_header        X-Forwarded-Host $host;
                     proxy_set_header        X-Forwarded-Server $http_host;
                     proxy_pass http://boiler-efficiency-backcalculation-api;
            }

         location /exactapi/incidents {
            if ($request_method = DELETE) {
                    return 200;
                }
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             proxy_pass http://apies;
         }

            location /exactapi/configs {
             proxy_cache_methods GET HEAD;
             proxy_cache mycache;
             proxy_cache_valid 30m; 
             proxy_set_header        Host $http_host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
             proxy_set_header        X-Forwarded-Host $host;
             proxy_set_header        X-Forwarded-Server $http_host;
             proxy_pass http://apies;
         }

          location /exactapi/units/alter {
              proxy_cache_methods GET HEAD;
              proxy_cache mycache;
              proxy_cache_valid 1440m;
              proxy_set_header        Host $http_host;
              proxy_set_header        X-Real-IP $remote_addr;
              proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
              proxy_set_header        X-Forwarded-Proto $scheme;
              proxy_set_header        X-Forwarded-Host $host;
              proxy_set_header        X-Forwarded-Server $http_host;
              proxy_pass http://apies;
          }
 
          location /exactapi/customers/alter {
              proxy_cache_methods GET HEAD;
              proxy_cache mycache;
              proxy_cache_valid 1440m;
              proxy_set_header        Host $http_host;
              proxy_set_header        X-Real-IP $remote_addr;
              proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
              proxy_set_header        X-Forwarded-Proto $scheme;
              proxy_set_header        X-Forwarded-Host $host;
              proxy_set_header        X-Forwarded-Server $http_host;
              proxy_pass http://apies;
          }
 
          location /exactapi/incidents/alter {
              proxy_cache_methods GET HEAD;
              proxy_cache mycache;
              proxy_cache_valid 10m;
              proxy_set_header        Host $http_host;
              proxy_set_header        X-Real-IP $remote_addr;
              proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
              proxy_set_header        X-Forwarded-Proto $scheme;
              proxy_set_header        X-Forwarded-Host $host;
              proxy_set_header        X-Forwarded-Server $http_host;
              proxy_pass http://apies;
          }


         location /grafana/ {
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "Upgrade";
            proxy_set_header Host $http_host;
            proxy_pass http://10.211.19.37/grafana/;
        }
     

              location /calculationdata{
                      proxy_set_header        Host $http_host;
                      proxy_set_header        X-Real-IP $remote_addr;
                      proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                      proxy_set_header        X-Forwarded-Proto $scheme;
                      proxy_set_header        X-Forwarded-Host $host;
                      proxy_set_header        X-Forwarded-Server $http_host;
                      proxy_pass http://calculation-data-api;
                      #proxy_pass http://calculation-data-api;

              }

       location /efficiency {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://efficiency-calculations-api;
              }


              location /test-flask-app-rohit{
                      proxy_set_header        Host $http_host;
                      proxy_set_header        X-Real-IP $remote_addr;
                      proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                      proxy_set_header        X-Forwarded-Proto $scheme;
                      proxy_set_header        X-Forwarded-Host $host;
                      proxy_set_header        X-Forwarded-Server $http_host;
                      proxy_pass https://pulse.thermaxglobal.com:3283;

              }


                 location ~* /sensordata/.+/lastlist$ {
                         proxy_set_header        Host $http_host;
                         proxy_set_header        X-Real-IP $remote_addr;
                         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                         proxy_set_header        X-Forwarded-Proto $scheme;
                         proxy_set_header        X-Forwarded-Host $host;
                         proxy_set_header        X-Forwarded-Server $http_host;
                         #proxy_pass http://localhost:7099;
                         proxy_pass http://lastlist-api;
                 }
 
              location /report {
                      proxy_set_header        Host $http_host;
                      proxy_set_header        X-Real-IP $remote_addr;
                      proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                      proxy_set_header        X-Forwarded-Proto $scheme;
                      proxy_set_header        X-Forwarded-Host $host;
                      proxy_set_header        X-Forwarded-Server $http_host;
                      proxy_pass http://10.211.19.39:3091;
              }

 
location = /exactapi/Users/logout {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://auth-handler-api;

}
        location /mqtt {
			# prevents 502 bad gateway error
                        proxy_buffers 8 32k;
                        proxy_buffer_size 64k;

                        proxy_pass http://10.211.19.37/mqtt;
                        #proxy_pass http://10.211.19.38/mqtt;
                        proxy_set_header X-Real-IP $remote_addr;
                        proxy_set_header Host $http_host;
                        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

                        # enables WS support
                        proxy_http_version 1.1;
                        proxy_set_header Upgrade $http_upgrade;
                        proxy_set_header Connection "upgrade";

                        proxy_read_timeout 999999999;
                }

        location /kairosapi/api/v1/datapoints {
		proxy_set_header        Host $http_host;
		proxy_set_header        X-Real-IP $remote_addr;
		proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header        X-Forwarded-Proto $scheme;
		proxy_set_header        X-Forwarded-Host $host;
		proxy_set_header        X-Forwarded-Server $http_host;
		proxy_set_header        X-Forwarded-Port 443;	
		proxy_pass http://10.211.19.37:8080/api/v1/datapoints;
        }
        

        location /kairosapi/api/v1/datapoints/query {
		proxy_set_header        Host $http_host;
		proxy_set_header        X-Real-IP $remote_addr;
		proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header        X-Forwarded-Proto $scheme;
		proxy_set_header        X-Forwarded-Host $host;
		proxy_set_header        X-Forwarded-Server $http_host;
		proxy_set_header        X-Forwarded-Port 443;	
		proxy_pass http://10.211.19.39:8080/api/v1/datapoints/query;
        }

        location /spaceapi/api/v1/datapoints  {
                proxy_set_header        Host $http_host;
                proxy_set_header        X-Real-IP $remote_addr;
                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header        X-Forwarded-Proto $scheme;
                proxy_set_header        X-Forwarded-Host $host;
                proxy_set_header        X-Forwarded-Server $http_host;
                proxy_set_header        X-Forwarded-Port 443;
                proxy_pass http://10.211.19.37:8080/api/v1/datapoints;
        }

        location /spaceapi/api/v1/datapoints/query {
		proxy_set_header        Host $http_host;
		proxy_set_header        X-Real-IP $remote_addr;
		proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header        X-Forwarded-Proto $scheme;
		proxy_set_header        X-Forwarded-Host $host;
		proxy_set_header        X-Forwarded-Server $http_host;
		proxy_set_header        X-Forwarded-Port 443;	
		proxy_pass http://10.211.19.37:8080/api/v1/datapoints/query;
        }


	  location /exactapi {
		client_max_body_size 300M;
		client_body_buffer_size    1000M;
	        proxy_set_header        Host $http_host;
        	proxy_set_header        X-Real-IP $remote_addr;
             	proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             	proxy_set_header        X-Forwarded-Proto $scheme;
                proxy_set_header        X-Forwarded-Host $host;
            	proxy_set_header        X-Forwarded-Server $http_host;
           	#proxy_pass http://apies;
           	proxy_pass http://apies;
         }
        
        location /v2/ingest {
			
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_set_header        X-Forwarded-Port 443;
                        proxy_pass http://localhost:4013;
                }

                location /v1/ingest/ts-ingest {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://localhost:4016;
                }


                location /pulse-ui {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://localhost:9003/;
                }
                location /pulse-admin-ui {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://localhost:9004/;
                    #alias /space/es-master/src/ui/pulse-admin-ui;
                }

                location /pulse-ui-v2 {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://localhost:9005/;
                    alias /space/es-master/src/ui/pulse-ui-v2;
		    
                }


		location /pulse-ui-test {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://localhost:9006/;
                }

		location /explorer {
			proxy_set_header        Host $http_host;
			proxy_set_header        X-Real-IP $remote_addr;
			proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header        X-Forwarded-Proto $scheme;
			proxy_set_header        X-Forwarded-Host $host;
			proxy_set_header        X-Forwarded-Server $http_host;
			#proxy_pass http://apies/explorer;
			proxy_pass http://apies/explorer;
               }
                
                location /streaming {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
			proxy_pass http://10.211.19.39:7000;
              }

                location /sensordata{
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
			proxy_pass http://a10:5049;
			#proxy_pass http://localhost:5049;
                }

                   location /sensordata/shadow {
                           proxy_set_header        Host $http_host;
                           proxy_set_header        X-Real-IP $remote_addr;
                           proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                           proxy_set_header        X-Forwarded-Proto $scheme;
                           proxy_set_header        X-Forwarded-Host $host;
                           proxy_set_header        X-Forwarded-Server $http_host;
                           proxy_pass http://redis-api;
                   }

		location /test/sensordata{
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        #proxy_pass http://10.211.19.38/test/sensordata;
                        proxy_pass http://test-flask-api-es;

                }

		location /test1/sensordata{
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://test-flask-api-es;

                }

location /test2/sensordata{
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://localhost:6021;

                }

location /test3/sensordata{
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://localhost:6022;

                }

                location /service{
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://localhost:8096;
                }

                location /deployimage {
                        proxy_set_header        Host $http_host;
                        proxy_set_header        X-Real-IP $remote_addr;
                        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header        X-Forwarded-Proto $scheme;
                        proxy_set_header        X-Forwarded-Host $host;
                        proxy_set_header        X-Forwarded-Server $http_host;
                        proxy_pass http://10.211.19.36:8096;
                }
		location /mail {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    proxy_pass http://localhost:5003;
		    #proxy_pass http://mail-api-tmx;
                }


	 location /apitest {
		     auth_request /auth;   # The sub-request to use
		     return 200 'VM UP';
	#proxy_set_header        Host $http_host;
		     #proxy_set_header        X-Real-IP $remote_addr;
		     #proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		     #proxy_set_header        X-Forwarded-Proto $scheme;
		     #proxy_set_header        X-Forwarded-Host $host;
		     #proxy_set_header        X-Forwarded-Server $http_host;
		      #  proxy_pass http://apies/exactapi/units;
		 }

		location /model {
                    proxy_set_header        Host $http_host;
                    proxy_set_header        X-Real-IP $remote_addr;
                    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header        X-Forwarded-Proto $scheme;
                    proxy_set_header        X-Forwarded-Host $host;
                    proxy_set_header        X-Forwarded-Server $http_host;
                    #proxy_pass http://localhost:5013;
                    proxy_pass http://model-api;
        	}

	      location /outages {
			 proxy_read_timeout 200s;
			 proxy_set_header        Host $http_host;
			 proxy_set_header        X-Real-IP $remote_addr;
			 proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
			 proxy_set_header        X-Forwarded-Proto $scheme;
			 proxy_set_header        X-Forwarded-Host $host;
			 proxy_set_header        X-Forwarded-Server $http_host;
			 proxy_pass http://localhost:3096;
		 }    

        }}
}


